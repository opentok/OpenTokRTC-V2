{"version":3,"sources":["web/js/layoutView.js"],"names":["global","LayoutRenderer","container","this","querySelector","prototype","defaultOptions","name","type","controlElems","[object Object]","id","options","Object","keys","forEach","option","item","HTMLElems","createElementAt","data-id","data-streamType","class","firstChild","controls","classList","add","appendControlElems","appendAdditionalUI","userInfoElem","nameElem","textContent","data-icon","main","length","controlName","control","dataIcon","data-eventName","eventFiredName","data-action","data-streamId","wrapper","enabled","removeChild","innerHTML","renderer","LayoutView","append","args","remove","removeAll","apply"],"mappings":"AAAC,CAACA,IACA,MAAMC,EAAiB,SAAUC,GAC/BC,KAAKD,UAAYA,EAAUE,cAAc,gBAG3CH,EAAeI,UAAY,CACzBC,eAAgB,CACdC,KAAM,GACNC,KAAM,SACNC,aAAc,IAGhBC,OAAOC,EAAIC,GACTA,EAAUA,GAAW,GACrBC,OAAOC,KAAKX,KAAKG,gBAAgBS,SAAQ,SAAUC,GACjDJ,EAAQI,GAAUJ,EAAQI,IAAWb,KAAKG,eAAeU,KACxDb,MACH,MAAMK,EAAOI,EAAQJ,KACfS,EAAOC,UAAUC,gBAAgBhB,KAAKD,UAAW,KAAM,CAC3DkB,UAAWT,EACXU,kBAAmBb,EACnBc,MAAO,UACN,KAAe,cAATd,EAAuB,KAAOL,KAAKD,UAAUqB,YAChDC,EAAWN,UAAUC,gBAAgBF,EAAM,OAOjD,OANAO,EAASC,UAAUC,IAAI,YACvBvB,KAAKwB,mBAAmBhB,EAAIH,EAAMgB,EAAUZ,EAAQH,aAAc,KAClEN,KAAKyB,mBAAmBjB,EAAIM,EAAMT,EAAMI,EAAQL,MAGhDW,UAAUC,gBAAgBF,EAAM,QAAQQ,UAAUC,IAAI,4BAC/CT,GAGTP,mBAAmBC,EAAIM,EAAMT,EAAMD,GACjC,MAAMsB,EAAeX,UAAUC,gBAAgBF,EAAM,OACrDY,EAAaJ,UAAUC,IAAI,aAE3B,MAAMI,EAAWZ,UAAUC,gBAAgBU,EAAc,OACzDC,EAASL,UAAUC,IAAI,QACvBI,EAASC,YAAcxB,EAEV,cAATC,GACFU,UAAUC,gBAAgBF,EAAM,IAAK,CAAEe,YAAa,WAGtDd,UAAUC,gBAAgBF,EAAM,MAAO,CACrCG,UAAWT,IACVc,UAAUC,IAAI,kBAGnBhB,mBAAmBC,EAAIH,EAAMyB,EAAMxB,GACjC,IAAKA,IAAiBI,OAAOC,KAAKL,GAAcyB,OAC9C,OAGF,MAAMV,EAAWN,UAAUC,gBAAgBc,EAAM,OACjDT,EAASC,UAAUC,IAAI,WAEvBb,OAAOC,KAAKL,GAAcM,QAAQoB,IAChC,MAAMC,EAAU3B,EAAa0B,GACvBvB,EAAU,CACdoB,YAAaI,EAAQC,SACrBC,iBAAkBF,EAAQG,eAC1BC,cAAeL,EACfM,gBAAiB9B,EACjBU,kBAAmBb,GAEfkC,EAAUxB,UAAUC,gBAAgBK,EAAU,OAEpDkB,EAAQjB,UAAUC,IAAOS,EAAH,WAClBC,EAAQO,SACVD,EAAQjB,UAAUC,IAAI,WAExBR,UAAUC,gBAAgBuB,EAAS,IAAK9B,MAI5CF,OAAOO,GACL,OAAOd,KAAKD,UAAU0C,YAAY3B,IAGpCP,YACEP,KAAKD,UAAU2C,UAAY,KAI/B,IAAIC,EAAW,KAEf9C,EAAO+C,WAAa,CAClBrC,KAAKR,GACH4C,EAAW,IAAI7C,EAAeC,IAGhC8C,OAAM,IAAIC,IACDH,EAASE,UAAUC,GAG5BC,OAAM,IAAID,IACDH,EAASI,UAAUD,GAG5BvC,YACEoC,EAASK,UAAUC,MAAMN,MAtG9B,CAyGE3C","sourcesContent":["!(global => {\n  const LayoutRenderer = function (container) {\n    this.container = container.querySelector('.tc-list ul');\n  };\n\n  LayoutRenderer.prototype = {\n    defaultOptions: {\n      name: '',\n      type: 'camera',\n      controlElems: {}\n    },\n\n    append(id, options) {\n      options = options || {};\n      Object.keys(this.defaultOptions).forEach(function (option) {\n        options[option] = options[option] || this.defaultOptions[option];\n      }, this);\n      const type = options.type;\n      const item = HTMLElems.createElementAt(this.container, 'li', {\n        'data-id': id,\n        'data-streamType': type,\n        class: 'stream'\n      }, null, type === 'publisher' ? null : this.container.firstChild);\n      const controls = HTMLElems.createElementAt(item, 'div');\n      controls.classList.add('controls');\n      this.appendControlElems(id, type, controls, options.controlElems, 'i');\n      this.appendAdditionalUI(id, item, type, options.name);\n      // Streams go inside <span> because of OpenTok overrides <li> styles if this\n      // one would be the container.\n      HTMLElems.createElementAt(item, 'span').classList.add('opentok-stream-container');\n      return item;\n    },\n\n    appendAdditionalUI(id, item, type, name) {\n      const userInfoElem = HTMLElems.createElementAt(item, 'div');\n      userInfoElem.classList.add('user-info');\n\n      const nameElem = HTMLElems.createElementAt(userInfoElem, 'div');\n      nameElem.classList.add('name');\n      nameElem.textContent = name;\n\n      if (type === 'publisher') {\n        HTMLElems.createElementAt(item, 'i', { 'data-icon': 'record' });\n      }\n\n      HTMLElems.createElementAt(item, 'div', {\n        'data-id': id\n      }).classList.add('dblclick_area');\n    },\n\n    appendControlElems(id, type, main, controlElems) {\n      if (!controlElems || !Object.keys(controlElems).length) {\n        return;\n      }\n\n      const controls = HTMLElems.createElementAt(main, 'div');\n      controls.classList.add('buttons');\n\n      Object.keys(controlElems).forEach(controlName => {\n        const control = controlElems[controlName];\n        const options = {\n          'data-icon': control.dataIcon,\n          'data-eventName': control.eventFiredName,\n          'data-action': controlName,\n          'data-streamId': id,\n          'data-streamType': type\n        };\n        const wrapper = HTMLElems.createElementAt(controls, 'div');\n        // IE does not support adding multiple classes\n        wrapper.classList.add(`${controlName}-action`);\n        if (control.enabled) {\n          wrapper.classList.add('enabled');\n        }\n        HTMLElems.createElementAt(wrapper, 'i', options);\n      });\n    },\n\n    remove(item) {\n      return this.container.removeChild(item);\n    },\n\n    removeAll() {\n      this.container.innerHTML = '';\n    }\n  };\n\n  let renderer = null;\n\n  global.LayoutView = {\n    init(container) {\n      renderer = new LayoutRenderer(container);\n    },\n\n    append(...args) {\n      return renderer.append(...args);\n    },\n\n    remove(...args) {\n      return renderer.remove(...args);\n    },\n\n    removeAll() {\n      renderer.removeAll.apply(renderer);\n    }\n  };\n})(this);\n"]}