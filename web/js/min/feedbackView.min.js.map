{"version":3,"sources":["web/js/feedbackView.js"],"names":["global","showFeedback","sendButton","audioScoreSelect","videoScoreSelect","otherInfo","reportIssueScore","resetForm","value","addHandlers","addEventListener","event","preventDefault","audioScore","options","selectedIndex","videoScore","Utils","sendEvent","description","Modal","hide","show","this","FeedbackView","init","aReportIssueLevel","document","querySelector"],"mappings":"AAEC,CAACA,IACA,IAAIC,EAAcC,EAAYC,EAAkBC,EAAkBC,EAAWC,EAuB7E,IAAIC,EAAY,KACdF,EAAUG,MAAQ,IAGhBC,EAAc,KAChBP,EAAWQ,iBAAiB,QAASC,IACnCA,EAAMC,iBACN,MAAMC,EAAaV,EAAiBW,QAAQX,EAAiBY,eAAeP,MACtEQ,EAAaZ,EAAiBU,QAAQV,EAAiBW,eAAeP,MAC5ES,MAAMC,UAAU,4BAA6B,CAC3CL,WAAAA,EACAG,WAAAA,EACAG,YAAad,EAAUG,SAGrBK,GAAcP,GAAoBU,GAAcV,IAClDW,MAAMC,UAAU,4BA7BbE,MAAMC,KARgB,sBA2C7BpB,GAAgBA,EAAaS,iBAAiB,SAAS,SAA+BC,GACpFA,EAAMC,iBAzCRL,IACOa,MAAME,KAJgB,wBAoD9BC,KAHMC,aAAe,CACpBC,KAvCWC,IACXpB,EAAmBoB,EACnBzB,EAAe0B,SAASC,cAAc,iBACtC1B,EAAayB,SAASC,cAAc,mCACpCzB,EAAmBwB,SAASC,cAAc,iCAC1CxB,EAAmBuB,SAASC,cAAc,iCAC1CvB,EAAYsB,SAASC,cAAc,gCACnCnB,OArBH","sourcesContent":["/* global Modal */\n\n!(global => {\n  let showFeedback, sendButton, audioScoreSelect, videoScoreSelect, otherInfo, reportIssueScore;\n\n  const feedbackReportSelector = '.feedback-report';\n\n  function showForm() {\n    resetForm();\n    return Modal.show(feedbackReportSelector);\n  }\n\n  function hideForm() {\n    return Modal.hide(feedbackReportSelector);\n  }\n\n  const init = aReportIssueLevel => {\n    reportIssueScore = aReportIssueLevel;\n    showFeedback = document.querySelector('#showFeedback');\n    sendButton = document.querySelector('.feedback-report .send-feedback');\n    audioScoreSelect = document.querySelector('.feedback-report .audio-score');\n    videoScoreSelect = document.querySelector('.feedback-report .video-score');\n    otherInfo = document.querySelector('.feedback-report .other-info');\n    addHandlers();\n  };\n\n  var resetForm = () => {\n    otherInfo.value = '';\n  };\n\n  var addHandlers = () => {\n    sendButton.addEventListener('click', event => {\n      event.preventDefault();\n      const audioScore = audioScoreSelect.options[audioScoreSelect.selectedIndex].value;\n      const videoScore = videoScoreSelect.options[videoScoreSelect.selectedIndex].value;\n      Utils.sendEvent('feedbackView:sendFeedback', {\n        audioScore,\n        videoScore,\n        description: otherInfo.value\n      });\n\n      if (audioScore <= reportIssueScore || videoScore <= reportIssueScore) {\n        Utils.sendEvent('feedbackView:reportIssue');\n      }\n\n      hideForm();\n    });\n\n    showFeedback && showFeedback.addEventListener('click', function onShowFeedbackClicked(event) {\n      event.preventDefault();\n      showForm();\n    });\n  };\n\n  global.FeedbackView = {\n    init\n  };\n})(this);\n"]}